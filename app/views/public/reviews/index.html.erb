<h1><%= @sauna.name %>へのレビュー</h1>
<%= link_to "投稿フォーム", new_public_sauna_review_path(sauna_id: @sauna.id) %>

<% @reviews.each do |review| %>
<table>
    <tr>
        <td><%= review.user.last_name %><%= review.user.first_name %></td>
        <td><%= link_to review.content, edit_public_sauna_review_path(id: review.id) %></td>
        <td>評価：<div id="review_star<%= review.id%>"></div></td>
        <td>コメント：<%= link_to "#{review.comments.count}件", public_comments_show_path(id: review.id, review_id: review.id, sauna_id: review.sauna_id) %></td>
    </tr>
    
</table>

<script>
$(document).on('turbolinks:load', function() {
  let elem = document.querySelector('#review_star<%= review.id %>');
  if (elem == null) return;

  elem.innerHTML = "";
  let opt = {  
    starOn: "<%= asset_path('star-on.png') %>",
    starOff: "<%= asset_path('star-off.png') %>",
    score: "<%= review.star %>",
    readOnly: true,
  };
  raty(elem, opt);
});
</script>


<% end %>